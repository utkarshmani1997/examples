# add db funcs to the type public functions

cli:
  name: "serverToolDB"

  commands:

    - name: "user"
      short: "work with the user resource"

      omit-run: true

      commands:
 
        - name: "migrate"
          usage: "migrate"
          imports:
            - path: "github.com/hofstadter-io/examples/blog/lib/types"
            - path: "github.com/hofstadter-io/examples/blog/server/databases/postgres"
          body: |

        - name: "create"
          usage: "create <data-file>"
          imports:
            - path: "github.com/hofstadter-io/examples/blog/lib/types"
            - path: "github.com/hofstadter-io/examples/blog/server/databases/postgres"
          args:
            - name: data-file
              type: string
              required: true
              
          body: |
            var user types.User
            // unmarshal data file into struct
            
            err := types.CreateUser(postgres.POSTGRES, user)
            if err != nil {
                fmt.Println("Error", err)
                os.Exit(1)
            }
            fmt.Println("Created:", user.uuid)
            

        - name: "find"
          usage: "find <uuid>"
          args:
            - name: uuid
              type: string

        - name: "update"
          usage: "update <data-file>"
          args:
            - name: data-file
              type: string

        - name: "delete"
          usage: "delete <uuid>"
          args:
            - name: uuid
              type: string 

        - name: "query"
          usage: "query [key=value]..."
          args:
            - name: matchers
              rest: true
              type: array:string 




# HOFSTADTER_BELOW


